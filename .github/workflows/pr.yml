name: Check-PR-Panel

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  linter:
    name: Linter
    uses: ./.github/workflows/linter.yml

  test:
    name: Test
    uses: ./.github/workflows/test.yml
    needs: linter

  review:
    permissions:
      contents: read
      pull-requests: write
      id-token: write
    name: Review
    needs: [test, linter]
    uses: ./.github/workflows/review.yml
    secrets:
      CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}